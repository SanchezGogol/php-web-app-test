# Тестовое задание для вакансии Junior DevOps специалист
Развернуть PHP приложение
---
Приложение располагается в директории ./project/junior-devops-spetsialist/src
Приложение подключается к двум БД MySql - writer_db и reader_db работающих в режиме slave;

Запуск приложения выполняется из директории ./project командой docker compose up -d.

Порядок запуска:

Сборка образа -> запуск writer_db -> запуск php - > запуск reader_db -> запуск nginx

Описание запуска:

1) Сборка образа. Во время запуска приложения происходит сборка образа php, dockerfile расположен в дирректории project/dockerfile.
2) Запуск бд writer_db. для работы приложению необходимо подключиться к бд, по этому в первом этапе осуществляется запуск бд writer_db.
3) Запуск php приложения. Осуществляется запуск приложения
4) запуск reader_db. База данных запускается в режиме репликации.

5) Запуск nginx. Т.К. все системы были запущены, осталось только задействовать proxy  для доступа к нашему приложению.

_____

Конфигурация:

#### WEB
Образ: nginx:1.25-alpine3.18-perl
В дирректории project/nginx располагается основной конфиг файл для nginx. При запуске контейнера конфиг пробрасывается как volume.

#### php
Образ: php:8.1.18-fpm (сборка образа с приложением)
При создании образа файл .env копируется из каталога project в каталог приложения. Нербходимо заполнить данный файл согласно своим требованиям, образец находится в каталоге project/junior-devops-spetsialist/src/.env.example

Также будет необходимо указать там строки для баз данных:
DB_HOST=
DB_USER=
DB_PASSWORD=
DB_NAME=

#### writer_db
При старте контейнера копируются кофигурации из дирректории project/mysql/master.*
#### reader_db
При старте контейнера копируются кофигурации из дирректории project/mysql/slave.*
